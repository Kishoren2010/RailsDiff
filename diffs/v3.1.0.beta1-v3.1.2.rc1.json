{
"diffs": [
{
"filepath": ".gitignore",
"diff": "@@ -1,4 +1,15 @@\n-.bundle\n-db/*.sqlite3\n-log/*.log\n-tmp/\n+# See http://help.github.com/ignore-files/ for more about ignoring files.\n+#\n+# If you find yourself ignoring temporary files generated by your text editor\n+# or operating system, you probably want to add a global ignore instead:\n+#   git config --global core.excludesfile ~/.gitignore_global\n+\n+# Ignore bundler config\n+/.bundle\n+\n+# Ignore the default SQLite database.\n+/db/*.sqlite3\n+\n+# Ignore all logfiles and tempfiles.\n+/log/*.log\n+/tmp\n"
}
,
{
"filepath": "Gemfile",
"diff": "@@ -1,19 +1,26 @@\n source 'http://rubygems.org'\n \n-gem 'rails', '3.1.0.beta1'\n+gem 'rails', '3.1.2.rc1'\n \n # Bundle edge Rails instead:\n # gem 'rails',     :git => 'git://github.com/rails/rails.git'\n \n gem 'sqlite3'\n \n-# Asset template engines\n-gem 'sass'\n-gem 'coffee-script'\n-gem 'uglifier'\n+\n+# Gems used only for assets and not required\n+# in production environments by default.\n+group :assets do\n+  gem 'sass-rails',   '~> 3.1.4'\n+  gem 'coffee-rails', '~> 3.1.1'\n+  gem 'uglifier', '>= 1.0.3'\n+end\n \n gem 'jquery-rails'\n \n+# To use ActiveModel has_secure_password\n+# gem 'bcrypt-ruby', '~> 3.0.0'\n+\n # Use unicorn as the web server\n # gem 'unicorn'\n \n@@ -25,5 +32,5 @@\n \n group :test do\n   # Pretty printed test output\n-  gem 'turn', :require => false\n+  gem 'turn', '~> 0.8.3', :require => false\n end\n"
}
,
{
"filepath": "README",
"diff": "@@ -156,6 +156,10 @@\n The default directory structure of a generated Ruby on Rails application:\n \n   |-- app\n+  |   |-- assets\n+  |       |-- images\n+  |       |-- javascripts\n+  |       `-- stylesheets\n   |   |-- controllers\n   |   |-- helpers\n   |   |-- mailers\n@@ -172,9 +176,6 @@\n   |   `-- tasks\n   |-- log\n   |-- public\n-  |   |-- images\n-  |   |-- javascripts\n-  |   `-- stylesheets\n   |-- script\n   |-- test\n   |   |-- fixtures\n@@ -188,11 +189,16 @@\n   |   |-- sessions\n   |   `-- sockets\n   `-- vendor\n+      |-- assets\n+          `-- stylesheets\n       `-- plugins\n \n app\n   Holds all the code that's specific to this particular application.\n \n+app/assets\n+  Contains subdirectories for images, stylesheets, and JavaScript files.\n+\n app/controllers\n   Holds controllers that should be named like weblogs_controller.rb for\n   automated URL mapping. All controllers should descend from\n@@ -237,8 +243,7 @@\n   the load path.\n \n public\n-  The directory available for the web server. Contains subdirectories for\n-  images, stylesheets, and javascripts. Also contains the dispatchers and the\n+  The directory available for the web server. Also contains the dispatchers and the\n   default HTML files. This should be set as the DOCUMENT_ROOT of your web\n   server.\n \n"
}
,
{
"filepath": "app/assets/javascripts/application.js",
"diff": "@@ -1,5 +1,8 @@\n-// FIXME: Tell people that this is a manifest file, real code should go into discrete files\n-// FIXME: Tell people how Sprockets and CoffeeScript works\n+// This is a manifest file that'll be compiled into including all the files listed below.\n+// Add new JavaScript/Coffee code in separate files in this directory and they'll automatically\n+// be included in the compiled file accessible from http://example.com/assets/application.js\n+// It's not advisable to add code directly here, but if you do, it'll appear at the bottom of the\n+// the compiled file.\n //\n //= require jquery\n //= require jquery_ujs\n"
}
,
{
"filepath": "app/assets/stylesheets/application.css",
"diff": "@@ -1,5 +1,7 @@\n /*\n- * FIXME: Introduce SCSS & Sprockets\n+ * This is a manifest file that'll automatically include all the stylesheets available in this directory\n+ * and any sub-directories. You're free to add application-wide styles to this file and they'll appear at\n+ * the top of the compiled file, but it's generally better to create a new file per style scope.\n  *= require_self\n  *= require_tree . \n */\n\\ No newline at end of file\n"
}
,
{
"filepath": "config/application.rb",
"diff": "@@ -2,9 +2,12 @@\n \n require 'rails/all'\n \n-# If you have a Gemfile, require the gems listed there, including any gems\n-# you've limited to :test, :development, or :production.\n-Bundler.require(:default, Rails.env) if defined?(Bundler)\n+if defined?(Bundler)\n+  # If you precompile assets before deploying to production, use this line\n+  Bundler.require(*Rails.groups(:assets => %w(development test)))\n+  # If you want your assets lazily compiled in production, use this line\n+  # Bundler.require(:default, :assets, Rails.env)\n+end\n \n module Railsdiff\n   class Application < Rails::Application\n@@ -30,24 +33,16 @@\n     # config.i18n.load_path += Dir[Rails.root.join('my', 'locales', '*.{rb,yml}').to_s]\n     # config.i18n.default_locale = :de\n \n-    # Please note that JavaScript expansions are *ignored altogether* if the asset\n-    # pipeline is enabled (see config.assets.enabled below). Put your defaults in\n-    # app/assets/javascripts/application.js in that case.\n-    #\n-    # JavaScript files you want as :defaults (application.js is always included).\n-    # config.action_view.javascript_expansions[:defaults] = %w(prototype prototype_ujs)\n-\n-\n     # Configure the default encoding used in templates for Ruby 1.9.\n     config.encoding = \"utf-8\"\n \n     # Configure sensitive parameters which will be filtered from the log file.\n     config.filter_parameters += [:password]\n \n-    # Enable IdentityMap for Active Record, to disable set to false or remove the line below.\n-    config.active_record.identity_map = true\n-\n     # Enable the asset pipeline\n     config.assets.enabled = true\n+\n+    # Version of your assets, change this if you want to expire all your assets\n+    config.assets.version = '1.0'\n   end\n end\n"
}
,
{
"filepath": "config/database.yml",
"diff": "@@ -1,5 +1,8 @@\n # SQLite version 3.x\n #   gem install sqlite3\n+#\n+#   Ensure the SQLite 3 gem is defined in your Gemfile\n+#   gem 'sqlite3'\n development:\n   adapter: sqlite3\n   database: db/development.sqlite3\n"
}
,
{
"filepath": "config/environments/development.rb",
"diff": "@@ -21,5 +21,10 @@\n \n   # Only use best-standards-support built into browsers\n   config.action_dispatch.best_standards_support = :builtin\n-end\n \n+  # Do not compress assets\n+  config.assets.compress = false\n+\n+  # Expands the lines which load the assets\n+  config.assets.debug = true\n+end\n"
}
,
{
"filepath": "config/environments/production.rb",
"diff": "@@ -11,13 +11,21 @@\n   # Disable Rails's static asset server (Apache or nginx will already do this)\n   config.serve_static_assets = false\n \n-  # Compress both stylesheets and JavaScripts\n-  config.assets.js_compressor  = :uglifier\n-  config.assets.css_compressor = :scss\n+  # Compress JavaScripts and CSS\n+  config.assets.compress = true\n+\n+  # Don't fallback to assets pipeline if a precompiled asset is missed\n+  config.assets.compile = false\n+\n+  # Generate digests for assets URLs\n+  config.assets.digest = true\n+\n+  # Defaults to Rails.root.join(\"public/assets\")\n+  # config.assets.manifest = YOUR_PATH\n \n   # Specifies the header that your server uses for sending files\n-  # (comment out if your front-end server doesn't support this)\n-  config.action_dispatch.x_sendfile_header = \"X-Sendfile\" # Use 'X-Accel-Redirect' for nginx\n+  # config.action_dispatch.x_sendfile_header = \"X-Sendfile\" # for apache\n+  # config.action_dispatch.x_sendfile_header = 'X-Accel-Redirect' # for nginx\n \n   # Force all access to the app over SSL, use Strict-Transport-Security, and use secure cookies.\n   # config.force_ssl = true\n@@ -31,7 +39,7 @@\n   # Use a different cache store in production\n   # config.cache_store = :mem_cache_store\n \n-  # Enable serving of images, stylesheets, and javascripts from an asset server\n+  # Enable serving of images, stylesheets, and JavaScripts from an asset server\n   # config.action_controller.asset_host = \"http://assets.example.com\"\n \n   # Precompile additional assets (application.js, application.css, and all non-JS/CSS are already added)\n"
}
,
{
"filepath": "config/initializers/wrap_parameters.rb",
"diff": "@@ -1,12 +1,14 @@\n # Be sure to restart your server when you modify this file.\n #\n-# This file contains the settings for ActionController::ParametersWrapper\n-# which will be enabled by default in the upcoming version of Ruby on Rails.\n+# This file contains settings for ActionController::ParamsWrapper which\n+# is enabled by default.\n \n-# Enable parameter wrapping for JSON. You can disable this by set :format to empty array.\n-ActionController::Base.wrap_parameters :format => [:json]\n+# Enable parameter wrapping for JSON. You can disable this by setting :format to an empty array.\n+ActiveSupport.on_load(:action_controller) do\n+  wrap_parameters format: [:json]\n+end\n \n # Disable root element in JSON by default.\n-if defined?(ActiveRecord)\n-  ActiveRecord::Base.include_root_in_json = false\n+ActiveSupport.on_load(:active_record) do\n+  self.include_root_in_json = false\n end\n"
}
,
{
"filepath": "db/seeds.rb",
"diff": "@@ -4,4 +4,4 @@\n # Examples:\n #\n #   cities = City.create([{ name: 'Chicago' }, { name: 'Copenhagen' }])\n-#   Mayor.create(name: 'Daley', city: cities.first)\n+#   Mayor.create(name: 'Emanuel', city: cities.first)\n"
}
,
{
"filepath": "test/performance/browsing_test.rb",
"diff": "@@ -1,8 +1,11 @@\n require 'test_helper'\n require 'rails/performance_test_help'\n \n-# Profiling results for each test method are written to tmp/performance.\n class BrowsingTest < ActionDispatch::PerformanceTest\n+  # Refer to the documentation for all available options\n+  # self.profile_options = { :runs => 5, :metrics => [:wall_time, :memory]\n+  #                          :output => 'tmp/performance', :formats => [:flat] }\n+\n   def test_homepage\n     get '/'\n   end\n"
}
]
}
